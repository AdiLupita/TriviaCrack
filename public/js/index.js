"use strict";function _objectSpread(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.forEach(function(e){_defineProperty(n,e,t[e])})}return n}function _defineProperty(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}var API=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"post",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return fetch(e,{method:"POST",rejectUnauthorized:!1,headers:_objectSpread({},t),body:n})}},{key:"get",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,{method:"GET",rejectUnauthorized:!1,headers:_objectSpread({},n)})}}]),e}(),slideIndex=0,TIME_SLIDE=5e3,length=0;function loadingCarrusel(){showSlides(),pagesEvent()}function pagesEvent(){for(var n=document.getElementsByClassName("owl-page"),e=function(e){n[e].addEventListener("click",function(){changePages(e)})},t=0;t<n.length;t+=1)e(t)}function changePages(e){slideIndex=e;var n=document.getElementsByClassName("owl-page"),t=document.getElementsByClassName("slides");(length=n.length)>t.length&&(length=t.length);for(var a=0;a<length;a+=1)a===e?(n[a].classList.add("active"),t[a].classList.add("visible")):(n[a].classList.remove("active"),t[a].classList.remove("visible"))}function showSlides(){changePages(slideIndex),length-1<++slideIndex&&(slideIndex=0),setTimeout(showSlides,TIME_SLIDE)}function loadingMenuAdmin(){try{document.getElementById("hide-menu-1").addEventListener("click",hide),document.getElementById("hide-menu-2").addEventListener("click",hide)}catch(e){}}function hide(){var e=document.getElementById("menu-admin");e.classList.contains("hide-menu")?e.classList.remove("hide-menu"):e.classList.add("hide-menu")}window.addEventListener("load",loadingCarrusel),window.addEventListener("load",loadingMenuAdmin);var hideHead,ITME_HIDE_HEADER=3e3;function show(){document.getElementById("menu").classList.toggle("hide")}function headerScroll(){try{document.getElementById("header").classList.remove("no-visible"),window.clearTimeout(hideHead);var e=document.getElementsByTagName("header"),n=(document.getElementById("logo"),document.getElementById("drop-menu")),t=document.getElementById("menu");window.scrollY<=100?(clearTimeout(hideHead),e[0].classList.remove("scroller"),n.classList.remove("scroller"),t.classList.remove("scroller"),t.parentNode.classList.add("menu"),itemMenuScroll(!1)):(e[0].classList.add("scroller"),n.classList.add("scroller"),t.classList.add("scroller"),t.parentNode.classList.remove("menu"),itemMenuScroll(!0),hideHead=setTimeout(hideHeader,ITME_HIDE_HEADER))}catch(e){}}function hideHeader(){document.getElementById("header").classList.add("no-visible")}function itemMenuScroll(e){var n=document.getElementsByTagName("a"),t=!0,a=!1,i=void 0;try{for(var o,l=n[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var r=o.value;"menu"===r.parentNode.parentNode.id&&(e?r.classList.add("scroller"):r.classList.remove("scroller"))}}catch(e){a=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(a)throw i}}}function changePictureWelcome(){var e=document.getElementById("welcome");450<window.screen.width?e.src="img/welcome.png":e.src="img/logo.png"}function loadingPrincipal(){try{document.getElementById("drop-menu").addEventListener("click",show),changePictureWelcome()}catch(e){}}function invalitInput(e){e.classList.add("incorrect")}function valitInput(e){e.classList.remove("incorrect")}window.addEventListener("scroll",headerScroll),window.addEventListener("load",loadingPrincipal);var VALITATIONS={id:/^[0-9]+$/,nickname:/^[a-zA-Z][\w]{2,}$/,word:/[a-zA-ZñÑ ]{3,}/,text:/[\wñÑ #@$%?()]{3,}/,password:/^[\wñÑ#@$%]{5,}$/,file:/^[\w]+\.(png|jpg)$/,email:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/};function valId(e){return VALITATIONS.id.test(e)}function valNickname(e){return VALITATIONS.nickname.test(e)}function valWord(e){return VALITATIONS.word.test(e)}function valText(e){return VALITATIONS.text.test(e)}function valPassword(e){return VALITATIONS.password.test(e)}function valFile(e){return VALITATIONS.file.test(e)}function valEmail(e){return VALITATIONS.email.test(e)}function apiLogin(e,n){var t=new URLSearchParams({nickname:e,password:n}).toString();API.post("/login",t,{"Content-Type":"application/x-www-form-urlencoded"}).then(function(e){200===e.status?window.location=e.url:e.json().then(function(e){window.alert(e.body.data)})})}function valInputLogin(){var e=document.getElementById("form-login"),n=e.elements.namedItem("nickname"),t=e.elements.namedItem("password"),a=!0;valNickname(n.value)?valitInput(n):(invalitInput(n),a=!1),valNickname(t.value)?valitInput(t):(invalitInput(t),a=!1),a&&apiLogin(n.value,t.value)}function validateLoginForm(){try{document.getElementById("btn-login").addEventListener("click",valInputLogin)}catch(e){}}function apiLogout(){API.get("/logout").then(function(e){200===e.status?window.location=e.url:e.json().then(function(e){window.alert(e.body.data)})})}function leaveSession(){try{document.getElementById("btn-logout").addEventListener("click",apiLogout)}catch(e){}}function apiRegister(e,n,t){var a=new URLSearchParams({nickname:e,password:t,email:n}).toString();API.post("/register",a,{"Content-Type":"application/x-www-form-urlencoded"}).then(function(e){200===e.status?window.location=e.url:e.json().then(function(e){var n=e.body.data;-1<n.indexOf("nickname")&&invalitInput(document.getElementById("new-nickname")),-1<n.indexOf("email")&&invalitInput(document.getElementById("new-email")),window.alert(n)})})}function validateRegData(){var e=document.getElementById("new-nickname"),n=document.getElementById("new-email"),t=document.getElementById("new-password"),a=!0;valNickname(e.value)?valitInput(e):(invalitInput(e),a=!1),valEmail(n.value)?valitInput(n):(invalitInput(n),a=!1),valPassword(t.value)?valitInput(t):(invalitInput(t),a=!1),a&&apiRegister(e.value,n.value,t.value)}function validateRegForm(){try{document.getElementById("btn-register").addEventListener("click",validateRegData)}catch(e){}}window.addEventListener("load",validateLoginForm),window.addEventListener("load",leaveSession),window.addEventListener("load",validateRegForm);